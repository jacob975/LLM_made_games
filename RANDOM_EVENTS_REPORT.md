# YAMLéš¨æ©Ÿäº‹ä»¶ç³»çµ±å¯¦æ–½å ±å‘Š

## ğŸ¯ å¯¦æ–½æ¦‚è¦

æˆåŠŸå°‡æ¸›è‚¥å¹³è¡¡éŠæˆ²çš„éš¨æ©Ÿäº‹ä»¶ç³»çµ±å¾ç¡¬ç·¨ç¢¼æ”¹ç‚ºä½¿ç”¨YAMLé…ç½®æ–‡ä»¶ï¼Œå»ºç«‹äº†æ›´éˆæ´»å’Œå¯æ“´å±•çš„äº‹ä»¶ç³»çµ±ã€‚

## ğŸ“‹ å®Œæˆå…§å®¹

### 1. éš¨æ©Ÿäº‹ä»¶ç³»çµ±é‡æ§‹
- âœ… å°‡åŸæœ¬ç¡¬ç·¨ç¢¼çš„éš¨æ©Ÿäº‹ä»¶ç§»è‡³YAMLé…ç½®
- âœ… å¯¦ç¾åŸºæ–¼æ¬Šé‡çš„éš¨æ©Ÿäº‹ä»¶é¸æ“‡ç³»çµ±
- âœ… æ·»åŠ äº‹ä»¶è§¸ç™¼æ©Ÿç‡æ§åˆ¶
- âœ… æ“´å±•éš¨æ©Ÿäº‹ä»¶æ•¸é‡å’Œå¤šæ¨£æ€§

### 2. æ¢ä»¶äº‹ä»¶ç³»çµ±
- âœ… å‰µå»ºæ¢ä»¶æª¢æŸ¥æ©Ÿåˆ¶ï¼Œæ”¯æ´å¤šç¨®æ¯”è¼ƒé‹ç®—å­
- âœ… å¯¦ç¾åŸºæ–¼è§’è‰²ç‹€æ…‹çš„æ¢ä»¶äº‹ä»¶è§¸ç™¼
- âœ… æ·»åŠ æ¢ä»¶äº‹ä»¶çš„è§¸ç™¼æ©Ÿç‡æ§åˆ¶
- âœ… å»ºç«‹æ™ºæ…§çš„ç‹€æ…‹åæ‡‰ç³»çµ±

### 3. é…ç½®æª”æ¡ˆå¢å¼·
- âœ… åœ¨ç¾æœ‰YAMLé…ç½®ä¸­æ·»åŠ éš¨æ©Ÿäº‹ä»¶é…ç½®
- âœ… å‰µå»ºæ¨™æº–æ¨¡å¼é…ç½®æª”æ¡ˆ `actions_standard.yaml`
- âœ… æ›´æ–°å›°é›£æ¨¡å¼é…ç½®åŒ…å«éš¨æ©Ÿäº‹ä»¶
- âœ… æä¾›è±å¯Œçš„äº‹ä»¶ç¯„ä¾‹

### 4. ç¨‹å¼ç¢¼æ¶æ§‹å„ªåŒ–
- âœ… æ·»åŠ æ¢ä»¶æª¢æŸ¥æ–¹æ³• `check_condition()`
- âœ… å¯¦ç¾æ¬Šé‡é¸æ“‡æ–¹æ³• `select_random_event()`
- âœ… é‡æ§‹äº‹ä»¶è™•ç†æ–¹æ³• `process_daily_events()`
- âœ… æ›´æ–°é è¨­é…ç½®ä»¥åŒ…å«äº‹ä»¶ç³»çµ±

## ğŸ² éš¨æ©Ÿäº‹ä»¶ç³»çµ±ç‰¹è‰²

### æ¬Šé‡ç³»çµ±
```yaml
events:
  - name: "æœ‹å‹é¼“å‹µ"
    description: "æ”¶åˆ°æœ‹å‹çš„é¼“å‹µè¨Šæ¯ï¼"
    effects:
      happiness: 3
      social: 2
    weight: 15    # é«˜æ¬Šé‡ï¼Œç¶“å¸¸ç™¼ç”Ÿ

  - name: "æ„å¤–æ”¶ç©«"
    description: "è·¯ä¸Šæ’¿åˆ°é›¶éŒ¢"
    effects:
      wealth: 2
      happiness: 1
    weight: 5     # ä½æ¬Šé‡ï¼Œå¶çˆ¾ç™¼ç”Ÿ
```

### æ¢ä»¶è§¸ç™¼
```yaml
conditional_events:
  - condition:
      stat: "health"
      operator: "<"
      value: 20
    event:
      name: "ç–²å€¦ç‹€æ…‹"
      description: "å› ç‚ºå¥åº·ç‹€æ³ä¸ä½³ï¼Œä»Šå¤©æ„Ÿåˆ°å¾ˆç–²å€¦..."
      effects:
        happiness: -5
    probability: 0.8
```

## ğŸŒŸ ç³»çµ±å„ªå‹¢

### 1. é«˜åº¦å¯é…ç½®
- **äº‹ä»¶å…§å®¹** - å®Œå…¨è‡ªå®šç¾©äº‹ä»¶æè¿°å’Œæ•ˆæœ
- **è§¸ç™¼æ©Ÿç‡** - å¯èª¿æ•´å…¨åŸŸå’Œå€‹åˆ¥äº‹ä»¶æ©Ÿç‡
- **æ¬Šé‡åˆ†é…** - ç²¾ç¢ºæ§åˆ¶äº‹ä»¶ç™¼ç”Ÿé »ç‡
- **æ¢ä»¶é‚è¼¯** - åŸºæ–¼éŠæˆ²ç‹€æ…‹çš„æ™ºæ…§è§¸ç™¼

### 2. è±å¯Œçš„äº‹ä»¶é¡å‹
- **éš¨æ©Ÿäº‹ä»¶** - ç´”éš¨æ©Ÿçš„æ—¥å¸¸äº‹ä»¶
- **æ¢ä»¶äº‹ä»¶** - åŸºæ–¼è§’è‰²ç‹€æ…‹çš„é‚è¼¯äº‹ä»¶
- **æ­£é¢äº‹ä»¶** - é¼“å‹µå’Œçå‹µæ©Ÿåˆ¶
- **è² é¢äº‹ä»¶** - æŒ‘æˆ°å’Œé¢¨éšªå› ç´ 

### 3. æ™ºæ…§å¹³è¡¡æ©Ÿåˆ¶
- **æ¬Šé‡åˆ†é…åˆç†** - æ­£é¢äº‹ä»¶é«˜æ¬Šé‡ï¼Œè² é¢äº‹ä»¶ä½æ¬Šé‡
- **æ¢ä»¶æ©Ÿç‡é©ä¸­** - é¿å…éæ–¼é »ç¹æˆ–ç¨€å°‘çš„è§¸ç™¼
- **æ•ˆæœå½±éŸ¿é©åº¦** - ä¸æœƒéåº¦å½±éŸ¿éŠæˆ²å¹³è¡¡

## ğŸ“Š äº‹ä»¶æ•¸æ“šçµ±è¨ˆ

### éš¨æ©Ÿäº‹ä»¶
- **ç¸½æ•¸**: 12å€‹æ¨™æº–éš¨æ©Ÿäº‹ä»¶
- **æ­£é¢äº‹ä»¶**: 8å€‹ (æ¬Šé‡ç¸½è¨ˆ: 77)
- **è² é¢äº‹ä»¶**: 4å€‹ (æ¬Šé‡ç¸½è¨ˆ: 33)
- **è§¸ç™¼æ©Ÿç‡**: 30% (å¯é…ç½®)

### æ¢ä»¶äº‹ä»¶
- **ç¸½æ•¸**: 8å€‹æ¢ä»¶äº‹ä»¶
- **ä½æŒ‡æ•¸è­¦å‘Š**: 4å€‹
- **é«˜æŒ‡æ•¸çå‹µ**: 2å€‹
- **ç‰¹æ®Šæ¢ä»¶**: 2å€‹
- **è§¸ç™¼æ©Ÿç‡**: 30%-90% (ä¾æ¢ä»¶è€Œå®š)

### äº‹ä»¶æ¬Šé‡åˆ†å¸ƒ
| æ¬Šé‡ç¯„åœ | äº‹ä»¶æ•¸é‡ | äº‹ä»¶é¡å‹ |
|---------|----------|----------|
| 15-20   | 2å€‹      | é«˜é »æ­£é¢äº‹ä»¶ |
| 10-15   | 4å€‹      | å¸¸è¦äº‹ä»¶ |
| 5-10    | 4å€‹      | ä¸­é »äº‹ä»¶ |
| 1-5     | 2å€‹      | ç¨€æœ‰äº‹ä»¶ |

## ğŸ® éŠæˆ²é«”é©—æå‡

### 1. å¢åŠ ä¸å¯é æ¸¬æ€§
- æ¯æ—¥å¯èƒ½ç™¼ç”Ÿå„ç¨®ä¸åŒäº‹ä»¶
- åŸºæ–¼æ¬Šé‡çš„éš¨æ©Ÿé¸æ“‡å¢åŠ é©šå–œ
- æ¢ä»¶äº‹ä»¶æä¾›é‚è¼¯æ€§åé¥‹

### 2. å¼·åŒ–è§’è‰²äº’å‹•
- äº‹ä»¶å›æ‡‰è§’è‰²ç•¶å‰ç‹€æ…‹
- æ™ºæ…§çš„ç‹€æ…‹ç®¡ç†å»ºè­°
- å‹•æ…‹çš„éŠæˆ²é«”é©—èª¿æ•´

### 3. æå‡é‡è¤‡éŠæˆ²åƒ¹å€¼
- è±å¯Œçš„äº‹ä»¶è®ŠåŒ–
- ä¸åŒé…ç½®ç”¢ç”Ÿä¸åŒé«”é©—
- ç­–ç•¥æ€§çš„ç‹€æ…‹ç®¡ç†

## âš™ï¸ æŠ€è¡“å¯¦ç¾äº®é»

### æ¢ä»¶æª¢æŸ¥ç³»çµ±
```python
def check_condition(self, condition: Dict, character_stats: Dict) -> bool:
    """æ”¯æ´å¤šç¨®æ¯”è¼ƒé‹ç®—å­çš„æ¢ä»¶æª¢æŸ¥"""
    stat = condition.get('stat')
    operator = condition.get('operator')
    value = condition.get('value')
    
    current_value = character_stats.get(stat, 0)
    
    # æ”¯æ´ <, >, <=, >=, ==, != ç­‰é‹ç®—å­
    if operator == '<':
        return current_value < value
    # ... å…¶ä»–é‹ç®—å­é‚è¼¯
```

### æ¬Šé‡é¸æ“‡ç®—æ³•
```python
def select_random_event(self, events: List[Dict]) -> Optional[Dict]:
    """åŸºæ–¼æ¬Šé‡çš„éš¨æ©Ÿé¸æ“‡ç®—æ³•"""
    total_weight = sum(event.get('weight', 1) for event in events)
    rand_num = random.uniform(0, total_weight)
    
    current_weight = 0
    for event in events:
        current_weight += event.get('weight', 1)
        if rand_num <= current_weight:
            return event
```

## ğŸ¯ é…ç½®ç¤ºä¾‹

### å‰µå»ºè‡ªå®šç¾©äº‹ä»¶
```yaml
# å­£ç¯€æ€§äº‹ä»¶
- name: "æ˜¥å­£éæ•"
  description: "èŠ±ç²‰å­£ç¯€ä¾†è‡¨ï¼Œæœ‰é»éæ•ç—‡ç‹€"
  effects:
    health: -2
    happiness: -1
  weight: 6

# æˆå°±äº‹ä»¶
- condition:
    stat: "weight"
    operator: "<="
    value: 65
  event:
    name: "ç›®æ¨™é”æˆ"
    description: "æˆåŠŸé”åˆ°ç›®æ¨™é«”é‡ï¼Œæ„Ÿåˆ°éå¸¸è‡ªè±ªï¼"
    effects:
      happiness: 10
      social: 5
  probability: 1.0
```

## ğŸš€ æœªä¾†æ“´å±•å¯èƒ½

### çŸ­æœŸæ”¹é€²
- [ ] äº‹ä»¶æ­·å²è¨˜éŒ„å’Œçµ±è¨ˆ
- [ ] äº‹ä»¶éˆç³»çµ±ï¼ˆé€£çºŒäº‹ä»¶ï¼‰
- [ ] æ›´å¤šæ¢ä»¶é‹ç®—å­æ”¯æ´

### é•·æœŸè¦åŠƒ
- [ ] æ™‚é–“ç›¸é—œäº‹ä»¶ï¼ˆå­£ç¯€ã€ç¯€æ—¥ï¼‰
- [ ] è§’è‰²å€‹æ€§åŒ–äº‹ä»¶åå¥½
- [ ] äº‹ä»¶æˆå°±å’Œæ”¶é›†ç³»çµ±

## ğŸ’¡ ä½¿ç”¨å»ºè­°

### å°ç©å®¶
1. é«”é©—ä¸åŒé…ç½®çš„äº‹ä»¶ç³»çµ±
2. æ³¨æ„æ¢ä»¶äº‹ä»¶çš„è§¸ç™¼é‚è¼¯
3. åˆ©ç”¨äº‹ä»¶ç³»çµ±å„ªåŒ–ç­–ç•¥

### å°é…ç½®å‰µä½œè€…
1. å¹³è¡¡æ­£è² é¢äº‹ä»¶çš„æ¯”ä¾‹
2. åˆç†è¨­ç½®äº‹ä»¶æ¬Šé‡
3. ç¢ºä¿æ¢ä»¶é‚è¼¯çš„åˆç†æ€§

---

**YAMLéš¨æ©Ÿäº‹ä»¶ç³»çµ±è®“éŠæˆ²æ›´åŠ ç”Ÿå‹•æœ‰è¶£ï¼Œæ¯æ¬¡éŠç©éƒ½æœ‰ä¸åŒçš„é«”é©—ï¼** ğŸ²âœ¨