# 超神肥 文字冒險遊戲 POC

這是一個基於pygame開發的文字冒險遊戲POC，以超神肥廣告劇本為內容，展示了角色對話系統和互動界面。

## 功能特色

- 🎭 **角色系統**: 支持多個角色，每個角色都有獨特的外觀和顏色
- 💬 **對話系統**: 打字機效果，讓文字逐字顯示
- 🎨 **視覺效果**: 角色動畫、高亮效果、脈衝動畫
- 🖱️ **互動控制**: 滑鼠點擊或鍵盤操作推進對話
- 📱 **響應式UI**: 自動換行、進度顯示

## 文件結構

```
text_advanture/
├── script.txt          # 原始劇本文件
├── main_game.py        # 主遊戲文件（推薦）
├── game.py            # 基礎版本
├── enhanced_game.py   # ModernGL增強版本（實驗性）
├── requirements.txt   # Python依賴列表
├── setup_env.bat     # 環境設置腳本
├── run_game.bat      # 遊戲啟動腳本
└── README.md         # 說明文件
```

## 安裝與運行

### 方法一：自動安裝（推薦）

1. 雙擊運行 `setup_env.bat` 來設置conda環境
2. 雙擊運行 `run_game.bat` 來啟動遊戲

### 方法二：手動安裝

1. 創建conda環境：
```bash
conda create -n text_adv python=3.11
conda activate text_adv
```

2. 安裝依賴：
```bash
pip install pygame pillow numpy
```

3. 運行遊戲：
```bash
python main_game.py
```

## 遊戲操作

### 基本控制
- **滑鼠左鍵**: 繼續對話
- **空白鍵**: 繼續對話
- **R鍵**: 重新開始遊戲
- **ESC鍵**: 退出遊戲

### 遊戲流程
1. 遊戲啟動後自動開始第一句對話
2. 文字會以打字機效果逐字顯示
3. 點擊滑鼠或按空白鍵可以跳過打字效果
4. 當文字完全顯示後，再次點擊進入下一句對話
5. 所有對話結束後會顯示結局畫面

## 技術實現

### 核心技術
- **Python 3.11**: 主要開發語言
- **Pygame**: 2D遊戲開發框架
- **字體渲染**: 支持中文顯示和Emoji
- **事件處理**: 滑鼠和鍵盤輸入

### 主要類別

#### `Character` 角色類
- 管理角色外觀、動畫和渲染
- 支持Emoji顯示和動態效果

#### `DialogueSystem` 對話系統類
- 實現打字機效果
- 處理文字顯示邏輯

#### `TextAdventureGamePOC` 主遊戲類
- 管理遊戲狀態和UI
- 處理用戶輸入和畫面渲染

### 視覺設計
- **色彩方案**: 使用不同顏色區分角色
- **UI布局**: 分為角色區、對話區和控制區
- **動畫效果**: 角色浮動、說話高亮、脈衝效果

## 劇本格式

遊戲支持以下劇本格式：

```
🎵 旁白
「旁白的對話內容」

👨‍🌾 農夫甲
「農夫甲的對話內容」

👩‍🌾 農婦乙
「農婦乙的對話內容」
```

支持的角色標識：
- `🎵 旁白` - 故事敘述者
- `👨‍🌾 農夫甲` - 男性農夫角色  
- `👩‍🌾 農婦乙` - 女性農婦角色
- `👴 專家口吻` - 專家角色
- `📢 旁白洗腦式狂喊` - 特殊旁白模式
- `🎵 合唱` - 群體合唱

## 開發說明

### 擴展功能
如果需要添加新功能，可以考慮：

1. **新角色**: 在 `Character` 字典中添加新角色
2. **音效**: 集成pygame.mixer來添加背景音樂和音效
3. **背景圖片**: 使用pygame.image載入背景圖片
4. **選擇分支**: 實現對話選項和劇情分支
5. **存檔功能**: 保存遊戲進度

### 版本比較

| 功能 | game.py | main_game.py | enhanced_game.py |
|------|---------|--------------|------------------|
| 基礎對話 | ✅ | ✅ | ✅ |
| 角色動畫 | ❌ | ✅ | ✅ |
| 打字機效果 | ❌ | ✅ | ✅ |
| ModernGL渲染 | ❌ | ❌ | ✅ |
| 穩定性 | 高 | 高 | 中 |

## 疑難排解

### 常見問題

**Q: 遊戲無法啟動**
A: 確保已正確安裝pygame和相關依賴，檢查Python環境是否正確

**Q: 中文字體顯示異常**
A: 程序會自動尋找系統中文字體，如果仍有問題可以手動指定字體路徑

**Q: Emoji無法顯示**
A: Windows系統需要Segoe UI Emoji字體，大部分現代Windows系統已包含

**Q: conda環境創建失敗**
A: 確保已安裝Anaconda或Miniconda，並且網路連接正常

### 效能優化

- 遊戲設計為60FPS運行
- 角色動畫使用輕量級實現
- 文字渲染進行了優化以減少重繪

## 未來發展

這個POC展示了文字冒險遊戲的基本框架，未來可以擴展為：

1. **完整的遊戲**: 添加更多劇情、角色和場景
2. **Web版本**: 使用pygame-web或其他技術移植到瀏覽器
3. **移動版本**: 使用Kivy或其他框架開發移動應用
4. **多媒體增強**: 集成音頻、視頻和更豐富的視覺效果

## 授權

此專案僅用於學習和演示目的。超神肥相關內容版權歸原作者所有。

---

**開發者備註**: 這是一個POC專案，展示了如何使用Python和pygame創建文字冒險遊戲。代碼結構清晰，易於理解和擴展。
## JSON格式支援

### 新增功能
- **JSON劇本格式**: 支援更靈活的劇本配置
- **角色配置文件**: 獨立的角色設定JSON文件
- **增強的動畫系統**: 基於角色配置的多樣化動畫效果
- **向後兼容**: 自動回退到TXT格式如果JSON不存在

### 文件說明
- `script.json`: JSON格式的劇本文件
- `character.json`: 角色配置文件
- `convert_script.py`: TXT到JSON轉換工具
- `main_game.py`: 支援JSON的主遊戲文件（已更新）

### 使用方法

1. **自動轉換**: 運行 `convert_to_json.bat` 或 `python convert_script.py`
2. **手動編輯**: 直接編輯 `script.json` 和 `character.json`
3. **遊戲運行**: 使用 `run_game.bat` 或 `python main_game.py`

### JSON劇本格式範例
```json
{
  "dialogues": [
    {
      "id": 1,
      "character_id": "narrator",
      "character_name": "旁白",
      "text": "對話內容",
      "type": "dialogue",
      "mood": "cheerful",
      "emphasis": "normal"
    }
  ]
}
```

### 角色配置格式範例
```json
{
  "characters": {
    "narrator": {
      "name": "旁白",
      "emoji": "🎵",
      "color": {"r": 70, "g": 130, "b": 180},
      "animation_style": "pulse"
    }
  }
}
```
